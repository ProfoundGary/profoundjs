{"version":3,"file":"styles.xml.js","names":["$attr","FORMAT_ID_STARTS_FROM","generateStylesXml","_ref","formats","styles","fonts","fills","borders","xml","length","concat","i","_iterator","_createForOfIteratorHelperLoose","_step","done","font","value","size","family","color","weight","style","custom","getColor","_iterator2","_step2","fill","gray125","_iterator3","_step3","border","left","right","top","bottom","getBorderXml","direction","_ref2","hasChildren","_iterator4","_step4","cellStyle","fontId","fillId","borderId","align","alignVertical","textRotation","indent","wrap","formatId","undefined","filter","_","join","getTextRotation","validateTextRotation","String","Error","slice","toUpperCase"],"sources":["../../../source/write/files/styles.xml.js"],"sourcesContent":["import $attr from '../../xml/sanitizeAttributeValue.js'\r\nimport { FORMAT_ID_STARTS_FROM } from '../styles.js'\r\n\r\nexport default function generateStylesXml({ formats, styles, fonts, fills, borders }) {\r\n  let xml = '<?xml version=\"1.0\" ?>'\r\n  xml += '<styleSheet xmlns=\"http://schemas.openxmlformats.org/spreadsheetml/2006/main\">'\r\n\r\n  // Turns out, as weird as it sounds, the order of XML elements matters to MS Office Excel.\r\n  // https://social.msdn.microsoft.com/Forums/office/en-US/cc47ab65-dab7-4e32-b676-b641aa1e1411/how-to-validate-the-xlsx-that-i-generate?forum=oxmlsdk\r\n  // For example, previously this library was inserting `<cellXfs/>` before `<fonts/>`\r\n  // and that caused MS Office 2007 Excel to throw an error about the file being corrupt:\r\n  // \"Excel found unreadable content in '*.xlsx'. Do you want to recover the contents of this workbook?\"\r\n  // \"Excel was able to open the file by repairing or removing the unreadable content.\"\r\n  // \"Removed Part: /xl/styles.xml part with XML error.  (Styles) Load error. Line 1, column ...\"\r\n  // \"Repaired Records: Cell information from /xl/worksheets/sheet1.xml part\"\r\n\r\n  if (formats.length > 0) {\r\n    xml += `<numFmts count=\"${formats.length}\">`\r\n    for (let i = 0; i < formats.length; i++) {\r\n      xml += `<numFmt numFmtId=\"${FORMAT_ID_STARTS_FROM + i}\" formatCode=\"${$attr(formats[i])}\"/>`\r\n    }\r\n    xml += `</numFmts>`\r\n  }\r\n\r\n  xml += `<fonts count=\"${fonts.length}\">`\r\n  for (const font of fonts) {\r\n    const {\r\n      size,\r\n      family,\r\n      color,\r\n      weight,\r\n      style,\r\n      custom\r\n    } = font\r\n    xml += '<font>'\r\n    xml += `<sz val=\"${size}\"/>`\r\n    xml += `<color ${color ? 'rgb=\"' + $attr(getColor(color)) + '\"' : 'theme=\"1\"'}/>`\r\n    xml += `<name val=\"${$attr(family)}\"/>`\r\n    // It's not clear what the `<family/>` tag means or does.\r\n    // It seems to always be `<family val=\"2\"/>` even for different\r\n    // font families (Calibri, Arial, etc).\r\n    xml += '<family val=\"2\"/>'\r\n    //\r\n    // It's not clear what the `<scheme/>` tag means or does.\r\n    // Seems like it's only preset for the default \"Calibri\" font.\r\n    // Adding it to any other font resets the font family in Microsoft Excel 2007.\r\n    //\r\n    // \"Defines the font scheme, if any, to which this font belongs.\r\n    //  When a font definition is part of a theme definition, then the font\r\n    //  is categorized as either a \"major\" or \"minor\" font scheme component.\r\n    //  When a new theme is chosen, every font that is part of a theme definition\r\n    //  is updated to use the new \"major\" or \"minor\" font definition for that theme.\r\n    //  Usually \"major\" fonts are used for styles like headings,\r\n    //  and \"minor\" fonts are used for body and paragraph text.\"\r\n    //\r\n    // https://hackage.haskell.org/package/xlsx-0.8.4/docs/Codec-Xlsx-Types-StyleSheet.html\r\n    //\r\n    if (!custom) {\r\n      xml += '<scheme val=\"minor\"/>'\r\n    }\r\n    if (weight === 'bold') {\r\n      xml += '<b/>'\r\n    }\r\n    if (style === 'italic') {\r\n      xml += '<i/>'\r\n    }\r\n    xml += '</font>'\r\n  }\r\n  xml += '</fonts>'\r\n\r\n  // MS Office 2007 Excel seems to require a `<fills/>` element to exist.\r\n  // without it, MS Office 2007 Excel thinks that the file is broken.\r\n  xml += `<fills count=\"${fills.length}\">`\r\n  for (const fill of fills) {\r\n    const { color, gray125 } = fill\r\n    xml += '<fill>'\r\n    if (color) {\r\n      xml += '<patternFill patternType=\"solid\">'\r\n      xml += `<fgColor rgb=\"${$attr(getColor(color))}\"/>`\r\n      // Whatever that could mean.\r\n      xml += '<bgColor indexed=\"64\"/>'\r\n      xml += '</patternFill>'\r\n    } else if (gray125) {\r\n      // \"gray125\" fill.\r\n      // For some weird reason, MS Office 2007 Excel seems to require that to be present.\r\n      // Otherwise, if absent, it would replace the first `backgroundColor`.\r\n      xml += '<patternFill patternType=\"gray125\"/>'\r\n    } else {\r\n      xml += '<patternFill patternType=\"none\"/>'\r\n    }\r\n    xml += '</fill>'\r\n  }\r\n  xml += '</fills>'\r\n\r\n  // MS Office 2007 Excel seems to require a `<borders/>` element to exist:\r\n  // without it, MS Office 2007 Excel thinks that the file is broken.\r\n  xml += `<borders count=\"${borders.length}\">`\r\n  for (const border of borders) {\r\n    const {\r\n      left,\r\n      right,\r\n      top,\r\n      bottom\r\n    } = border\r\n    const getBorderXml = (direction, { style, color }) => {\r\n      if (color && !style) {\r\n        style = 'thin'\r\n      }\r\n      const hasChildren = color ? true : false\r\n      return `<${direction}` +\r\n        (style ? ` style=\"${$attr(style)}\"` : '') +\r\n        (hasChildren ? '>' : '/>') +\r\n        (color ? `<color rgb=\"${$attr(getColor(color))}\"/>` : '') +\r\n        (hasChildren ? `</${direction}>` : '')\r\n    }\r\n    xml += '<border>'\r\n    xml += getBorderXml('left', left)\r\n    xml += getBorderXml('right', right)\r\n    xml += getBorderXml('top', top)\r\n    xml += getBorderXml('bottom', bottom)\r\n    xml += '<diagonal/>'\r\n    xml += '</border>'\r\n  }\r\n  xml += '</borders>'\r\n\r\n  // What are `<cellXfs/>` and `<cellStyleXfs/>`:\r\n  // http://officeopenxml.com/SSstyles.php\r\n  //\r\n  // `<cellStyleXfs/>` are referenced from `<cellXfs/>` as `<xf xfId=\"...\"/>`.\r\n  // `<cellStyleXfs/>` defines abstract \"cell styles\" that can be \"extended\"\r\n  // by \"cell styles\" defined by `<cellXfs/>` that can be applied to individual cells:\r\n  // 1. `<cellStyleXfs><xf .../></cellStyleXfs>`\r\n  // 2. `<cellXfs><xf xfId={cellStyleXfs.xf.index}/></cellXfs>`\r\n  // 3. `<c s={cellXfs.xf.index}/>`\r\n  // Seems like \"cell styles\" defined by `<cellXfs/>` have to reference\r\n  // some abstract \"cell styles\" defined by `<cellStyleXfs/>` by the spec.\r\n  // Otherwise, there would be no need to use `<cellStyleXfs/>` at all.\r\n  // The naming is ambiguous and weird. The whole scheme is needlessly redundant.\r\n\r\n  // xml += '<cellStyleXfs count=\"2\">'\r\n  // xml += '<xf numFmtId=\"0\" fontId=\"0\" fillId=\"0\" borderId=\"0\"/>'\r\n  // // `applyFont=\"1\"` means apply a custom font in this \"abstract\" \"cell style\"\r\n  // // rather than using a default font.\r\n  // // Seems like by default `applyFont` is `\"0\"` meaning that,\r\n  // // unless `\"1\"` is specified, it would ignore the `fontId` attribute.\r\n  // xml += '<xf numFmtId=\"0\" fontId=\"1\" applyFont=\"1\" fillId=\"0\" borderId=\"0\"/>'\r\n  // xml += '</cellStyleXfs>'\r\n\r\n  xml += `<cellXfs count=\"${styles.length}\">`\r\n  for (const cellStyle of styles) {\r\n    const {\r\n      fontId,\r\n      fillId,\r\n      borderId,\r\n      align,\r\n      alignVertical,\r\n      textRotation,\r\n      indent,\r\n      wrap,\r\n      formatId\r\n    } = cellStyle\r\n    // `applyNumberFormat=\"1\"` means \"apply the `numFmtId` attribute\".\r\n    // Seems like by default `applyNumberFormat` is `\"0\"` meaning that,\r\n    // unless `\"1\"` is specified, it would ignore the `numFmtId` attribute.\r\n    xml += '<xf ' +\r\n      [\r\n        formatId !== undefined ? `numFmtId=\"${formatId}\"` : undefined,\r\n        formatId !== undefined ? 'applyNumberFormat=\"1\"' : undefined,\r\n        fontId !== undefined ? `fontId=\"${fontId}\"` : undefined,\r\n        fontId !== undefined ? 'applyFont=\"1\"' : undefined,\r\n        fillId !== undefined ? `fillId=\"${fillId}\"` : undefined,\r\n        fillId !== undefined ? 'applyFill=\"1\"' : undefined,\r\n        borderId !== undefined ? `borderId=\"${borderId}\"` : undefined,\r\n        borderId !== undefined ? 'applyBorder=\"1\"' : undefined,\r\n        align || alignVertical || textRotation || indent || wrap ? 'applyAlignment=\"1\"' : undefined,\r\n        // 'xfId=\"0\"'\r\n      ].filter(_ => _).join(' ') +\r\n    '>' +\r\n      // Possible horizontal alignment values:\r\n      //  left, center, right, fill, justify, center_across, distributed.\r\n      // Possible vertical alignment values:\r\n      //  top, vcenter, bottom, vjustify, vdistributed.\r\n      // https://xlsxwriter.readthedocs.io/format.html#set_align\r\n      (align || alignVertical || textRotation || indent || wrap\r\n        ? '<alignment' +\r\n          (align ? ` horizontal=\"${$attr(align)}\"` : '') +\r\n          (alignVertical ? ` vertical=\"${$attr(alignVertical)}\"` : '') +\r\n          (textRotation ? ` textRotation=\"${getTextRotation(validateTextRotation(textRotation))}\"` : '') +\r\n          (indent ? ` indent=\"${$attr(String(indent))}\"` : '') +\r\n          (wrap ? ` wrapText=\"1\"` : '') +\r\n          '/>'\r\n        : ''\r\n      ) +\r\n    '</xf>'\r\n  }\r\n  xml += `</cellXfs>`\r\n\r\n  xml += '</styleSheet>'\r\n\r\n  return xml\r\n}\r\n\r\nfunction getColor(color) {\r\n  if (color[0] !== '#') {\r\n    throw new Error(`Color \"${color}\" must start with a \"#\"`)\r\n  }\r\n  return `FF${color.slice('#'.length).toUpperCase()}`\r\n}\r\n\r\n// Validates text rotation parameter value.\r\n// Text rotation parameter value could be from -90 to 90.\r\n// Positive values rotate the text counterclockwise, and negative values rotate the text clockwise.\r\n//\r\n// The spec-compliant `textRotation` parameter value is weird.\r\n// See `getTextRotation()` function comments.\r\n//\r\n// I've searched the internet on how other libraries expect text rotation parameter to look like.\r\n// The consensus seems to be \"-90...90\" so that it's not as weird as the official spec defines it.\r\n//\r\n// In ClosedXML .NET library, it allows the values from -90 to 90:\r\n// https://docs.closedxml.io/en/latest/features/cell-format.html#orientation\r\n//\r\n// In XlsxWriter Python library, it's -90 to 90 with 270 as a special magic value:\r\n// https://xlsxwriter.readthedocs.io/format.html#format-set-rotation\r\n//\r\n// In Apache POI, it's also -90 to 90 and 255 as a special magic value:\r\n// https://copyprogramming.com/howto/how-to-rotate-text-in-a-spreadsheet-cell-using-apache-poi\r\n//\r\n// \"Specify the angle of rotation for the text within the cell.\r\n//  The degree of rotation can range between -90 and 90 degrees, or it can be set to 0xff for vertical alignment.\"\r\n//\r\n// So -90 to 90 seems like a common-practice value range.\r\n//\r\nfunction validateTextRotation(textRotation) {\r\n  if (!(textRotation >= -90 && textRotation <= 90)) {\r\n    throw new Error(`Unsupported text rotation angle: ${textRotation}. Values from -90 to 90 are supported.`);\r\n  }\r\n  return textRotation\r\n}\r\n\r\n// Transforms `textRotation` parameter value to the spec-compliant form.\r\n//\r\n// The XLSX specification for the value of `textRotation` is weird:\r\n// https://learn.microsoft.com/en-us/dotnet/api/documentformat.openxml.spreadsheet.alignment?view=openxml-2.8.1\r\n//\r\n// \"Text rotation in cells. Expressed in degrees. Values range from 0 to 180.\r\n//  The first letter of the text is considered the center-point of the arc.\r\n//  For 0 - 90, the value represents degrees above horizon.\r\n//  For 91-180 the degrees below the horizon is calculated as:\r\n//  [degrees below horizon] = 90 - textRotation\"\r\n//\r\nfunction getTextRotation(textRotation) {\r\n  if (textRotation < 0) {\r\n    return 90 - textRotation\r\n  }\r\n  return textRotation\r\n}"],"mappings":"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","ignoreList":[]}