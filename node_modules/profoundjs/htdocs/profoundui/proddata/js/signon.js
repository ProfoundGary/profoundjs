function x(c){this.onready=this.onfail=this.onsuccess=this.cacheBuster=this.suppressAlert=this.password=this.user=this.async=this.url=this.reqData=this.postData=this.method=null;this.headers={};this.params=null;this.sendAsBinary=true;var b=this.overrideMimeType=null,a=null,d=null,e=null,g=typeof pui!="undefined"&&typeof pui.alert!="undefined"?pui.alert:alert,f=this;if(x.defaultHeaders)this.headers=x.defaultHeaders;if(typeof c=="object")for(var i in c){if(typeof this[i]!="undefined")this[i]=c[i]}else this.url=
c;if(window.XMLHttpRequest)b=new XMLHttpRequest;else if(window.ActiveXObject)b=new ActiveXObject("Microsoft.XMLHTTP");else{g("Ajax request error: Unsupported browser.");return}this.send=this.send=function(){function h(){if(b.readyState==4){a=b.status===0?w?"Request aborted.":"Request failed. Check the browser console for more details.":b.status+" - "+b.statusText;f.onready!=null&&f.onready(f);if(b.status==200){d=true;f.onsuccess!=null&&f.onsuccess(f)}else{d=false;f.suppressAlert!=true&&g(a);f.onfail!=
null&&f.onfail(f)}e=false}}var k,l=null,m=null,q=null;if(f.method==null)l="GET";else if(typeof f.method!="string"&&(f.method.toUpperCase()!="GET"||f.method.toUpperCase()!="POST"||f.method.toUpperCase()!="PUT"||f.method.toUpperCase()!="DELETE")){g('Invalid value for property: "method".');return}else l=f.method.toUpperCase();if(l=="POST"||l=="PUT"||l=="DELETE"){if(f.reqData!=null)q=f.reqData;else if(f.postData!=null)q=f.postData;if(q!=null){if(typeof q!="string"){g('Invalid value for property: "postData".');
return}}else q=""}if(f.async==null)m=true;else if(f.async!=true&&f.async!=false){g('Invalid value for property: "async".');return}else m=f.async;if(typeof f.url!="string")g('Invalid value for property: "url".');else{if(f.user!=null)if(typeof f.user!="string"){g('Invalid value for property: "user".');return}if(f.password!=null)if(typeof f.password!="string"){g('Invalid value for property: "password".');return}if(f.onsuccess!=null)if(typeof f.onsuccess!="function"){g('Invalid value for event: "onsuccess".');
return}if(f.onfail!=null)if(typeof f.onfail!="function"){g('Invalid value for event: "onfail".');return}if(f.onready!=null)if(typeof f.onready!="function"){g('Invalid value for event: "onready".');return}var o=true;if(q!=null)for(k in f.headers)if(k.toUpperCase()=="CONTENT-TYPE")if(f.headers[k].toLowerCase().indexOf("www-form-urlencoded")==-1)o=false;var t=f.url,n=f.params;if(typeof n=="object"){var j="";for(k in n){var r=n[k],p=[];if(typeof r=="object"){if(r.length!=null&&r.length>0)p=r}else p.push(r);
for(r=0;r<p.length;r++){if(j!="")j+="&";j+=encodeURIComponent(k)+"="+encodeURIComponent(p[r])}}if(j!="")if(o&&(l=="POST"||l=="PUT"||l=="DELETE")){if(q!=null&&q!="")q+="&";else q="";q+=j}else{o=t.split("?");if(o.length==2&&o[1]!="")t=o[0]+"?"+o[1]+"&"+j;else t+="?"+j}}if(l==="GET"&&(f.cacheBuster===null||f.cacheBuster===true))t=pui.addUrlCacheBuster(t);try{typeof f.user=="string"&&typeof f.password=="string"?b.open(l,t,m,f.user,f.password):b.open(l,t,m);t=false;var s=f.headers;for(k in s){b.setRequestHeader(k,
s[k]);if(k.toUpperCase()=="CONTENT-TYPE")t=true}if(l=="POST"||l=="PUT"||l=="DELETE")t||b.setRequestHeader("Content-type","application/x-www-form-urlencoded");typeof f.overrideMimeType=="string"&&typeof b.overrideMimeType=="function"&&b.overrideMimeType(f.overrideMimeType)}catch(v){g(v);return}e=true;var w=false;if(m==true){b.onload=h;b.onerror=h;b.onabort=function(){w=true;h()}}if(f.sendAsBinary==true)try{b.sendAsBinary(q)}catch(E){b.send(q)}else b.send(q);m!=true&&h()}};this.ok=this.N=function(){return d!=
null?d:false};this.getResponseText=this.d=function(){return b.responseText};this.getResponseXML=this.w=function(){return b.responseXML};this.getStatus=this.e=function(){return b.status};this.getStatusText=this.n=function(){return b.statusText};this.getStatusMessage=this.m=function(){return a};this.getAllResponseHeaders=this.getAllResponseHeaders=function(){if(d)try{return b.getAllResponseHeaders()}catch(h){g(h)}};this.getResponseHeader=this.getResponseHeader=function(h){if(d)try{return b.getResponseHeader(h)}catch(k){g(k)}};
this.setRequestHeader=this.setRequestHeader=function(h,k){f.headers[h]=k};this.abort=this.abort=function(){if(e===true)try{b.abort()}catch(h){g(h)}}}
function y(c,b){var a,d,e,g="";if(arguments.length==1&&typeof arguments[0]=="object"){a=arguments[0];a.async=null;a.onsuccess=null;if(typeof a.handler=="function"){d=true;e=a.handler}else d=false}else if(b!=null&&typeof b=="function"){d=true;e=b}else d=false;a=new x(arguments[0]);a.async=d;a.onsuccess=function(f){g+=f.d();d==true&&e(g)};a.send();if(d==false)return g}
function B(c,b){var a,d,e,g=null,f=false;if(arguments.length==1&&typeof arguments[0]=="object"){a=arguments[0];a.async=null;a.onsuccess=null;if(a.saveResponse==true)f=true;if(typeof a.handler=="function"){d=true;e=a.handler}else d=false}else if(b!=null&&typeof b=="function"){d=true;e=b}else d=false;a=new x(arguments[0]);a.async=d;a.onsuccess=function(i){i=i.d();if(f&&typeof pui=="object")pui.savedJSON=i;try{g=eval("("+i+")")}catch(h){e(null,h);return}d==true&&e(g)};a.send();if(d==false)return g}
if(typeof window.pui=="undefined")window.pui={};window.RPGspRequest=x;window.pui.Ajax=x;window.pui.AjaxRequest=x;window.ajax=y;
window.ajaxXML=function(c,b){var a,d,e,g=null;if(arguments.length==1&&typeof arguments[0]=="object"){a=arguments[0];a.async=null;a.onsuccess=null;a.onfail=null;a.onsuccess=null;if(typeof a.handler=="function"){d=true;e=a.handler}else d=false}else if(b!=null&&typeof b=="function"){d=true;e=b}else d=false;a=new x(arguments[0]);a.async=d;a.onsuccess=function(f){g=f.w();d==true&&e(g)};a.send();if(d==false)return g};window.ajaxJSON=B;
window.ajaxSubmit=function(c,b){var a,d="",e=typeof pui!="undefined"&&typeof pui.alert!="undefined"?pui.alert:alert;if(typeof c=="object")a=c;else{a=document.getElementById(c);if(a==null)a=document.forms[c]}var g;if(a!=null)g=a.tagName;if(a==null||g==null||g.toUpperCase()!="FORM"){e("Ajax request error: Invalid form object.");return""}if(c.action==""){e("Ajax request error: Invalid form action.");return""}for(e=0;e<a.elements.length;e++){g=a.elements[e];if(g.name!=null&&g.name!=""){var f=false;if(g.tagName==
"INPUT"){var i=g.type;i=i.toLowerCase();if(i=="hidden")f=true;if(i=="password")f=true;if(i=="text")f=true;if(pui.oa(i))f=true;if(i=="")f=true;if(i=="checkbox"||i=="radio")if(g.checked)f=true}if(g.tagName=="TEXTAREA")f=true;if(g.tagName=="SELECT")f=true;if(f){if(d!="")d+="&";d+=g.name+"="+encodeURIComponent(g.value)}}}a=new x(a.action);a.method="POST";a.postData=d;var h="",k;if(b!=null&&typeof b=="function")k=true;else{k=false;a.async=false}a.onsuccess=function(l){h+=l.d();k==true&&b(h)};a.send();
if(k==false)return h};function D(c,b){var a,d;a=c!=null&&typeof c=="object"?c:document.getElementById(c);if(a==null)return"";d="";if(a.tagName.toLowerCase()=="div"){d=a.firstChild;d=d!=null&&d.tagName!=null&&d.tagName=="A"?d.innerHTML:a.innerHTML}if(a.tagName=="INPUT"&&a.type=="checkbox"){if(a.indeterminate===true)return a.indeterminateValue;if(a.checked&&a.checkedValue!=null)return a.checkedValue;if(!a.checked&&a.uncheckedValue!=null)return a.uncheckedValue;return a.checked}if(a.tagName=="INPUT"&&a.type=="radio")return a.checked;
if(a.tagName=="TEXTAREA")d=a.value;else if(a.tagName=="INPUT"){var e=a.j;if(b&&e!=null&&typeof e.value==="string")if(e.value.length>0)d=a.j.value;else{if(pui["force auto complete match"]==false)d=a.value}else d=a.value}else if(a.tagName=="SELECT"){d=a.selectedIndex;d=d>=0?a.options[d].value:a.pui&&a.pui.properties&&a.pui.properties.value?a.pui.properties.value:a.value}if(a.comboBoxWidget!=null)d=a.comboBoxWidget.getValue();if(a.h!=null)d=a.h.getValue();if(a.signaturePad!=null)d=a.signaturePad.getValue();
if(a.A!=null)d=String(a.value);if(a.g!=null){d="";if(a.g.K&&a.g.O!=null)d=a.g.O;else if(!a.g.K&&a.g.M!=null)d=a.g.M}if(a.pui&&a.pui.widget&&typeof a.pui.widget.getPropertyValue==="function")d=a.pui.widget.getPropertyValue("value");for(d=d.replace(/&nbsp;/g," ");d.indexOf(String.fromCharCode(160))!=-1;)d=d.replace(String.fromCharCode(160)," ");if(d==a.ha)d="";return d}function G(c){if(typeof c!=="string")return c;for(;c.charAt(0)==" ";)c=c.replace(c.charAt(0),"");return c}
function I(c){if(typeof c!=="string")return c;return c.replace(/^\s*|\s*$/g,"")}pui.detachCalendar=function(c){if(typeof c=="string")c=document.getElementById(c);c!=null&&pui.sa(c)};
function J(c,b,a){var d=false,e=location.href;e=e.split("?")[0];e=e.split("/");if(e.length>2&&e[e.length-2].toLowerCase()=="auth")d=true;e="/profoundui/";var g=["PUI0009101.PGM","PUI0009102.PGM","PUI0009103.PGM","PUI0009104.PGM","PUI0009107.PGM","PUI0009109.PGM","PUI0009110.PGM","PUI0009119.PGM"];if(typeof pui.widgetURLPrefix==="string"&&g.indexOf(c.toUpperCase())!=-1){e=pui.widgetURLPrefix;if(e.substr(e.length-1)!="/")e+="/"}if(d==true||a==true)e+="auth/";e+=c;if(b!=null&&b==true)e+="/"+PSID;if(pui.serverURL!=
null)e=pui.serverURL+e;return e}pui.getProgramURL=J;pui.ja=function(c){return pui.v(c).x};pui.ka=function(c){return pui.v(c).y};
pui.v=function(c){c=c||window.event;var b={x:0,y:0};if(c!=null&&c.touches!=null&&c.touches.length==1){b.x=c.touches[0].pageX;b.y=c.touches[0].pageY}else if(c!=null){if(c.pageX)b.x=c.pageX;else if(c.clientX)b.x=c.clientX+(document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft);if(c.pageY)b.y=c.pageY;else if(c.clientY)b.y=c.clientY+(document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop)}return b};
function K(){var c={},b="";b=location.search.substring(1,location.search.length);if(b.length==0)return c;b=b.replace(/\+/g," ");b=b.split("&");for(var a=0;a<b.length;a++){var d=b[a].split("="),e=decodeURIComponent(d[0]),g="";if(d.length==2)g=decodeURIComponent(d[1]);c[e]=g}return c}if(typeof applyDesignProperty!="undefined")window.aa=applyDesignProperty;
pui.r={u:function(c){for(var b="",a=0;a<c.length;a++){var d=c.codePointAt(a);d>65535&&a++;if(d<128)b+=String.fromCharCode(d);else{if(d<2048)b+=String.fromCharCode(d>>6|192);else{if(d<65536)b+=String.fromCharCode(d>>12|224);else{b+=String.fromCharCode(d>>18|240);b+=String.fromCharCode(d>>12&63|128)}b+=String.fromCharCode(d>>6&63|128)}b+=String.fromCharCode(d&63|128)}}return b},t:function(c){for(var b="",a=0,d=0,e=0,g=0,f=0;a<c.length;){d=c.charCodeAt(a);if(d<128){b+=String.fromCharCode(d);a++}else if(d<
224){e=c.charCodeAt(a+1);b+=String.fromCharCode((d&31)<<6|e&63);a+=2}else if(d<240){e=c.charCodeAt(a+1);g=c.charCodeAt(a+2);b+=String.fromCharCode((d&15)<<12|(e&63)<<6|g&63);a+=3}else{e=c.charCodeAt(a+1);g=c.charCodeAt(a+2);f=c.charCodeAt(a+3);b+=String.fromCodePoint((d&7)<<18|(e&63)<<12|(g&63)<<6|f&63);a+=4}}return b}};
pui.W={c:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u:function(c){var b="",a,d,e,g,f,i,h=0;for(c=pui.r.u(c);h<c.length;){a=c.charCodeAt(h++);d=c.charCodeAt(h++);e=c.charCodeAt(h++);g=a>>2;a=(a&3)<<4|d>>4;f=(d&15)<<2|e>>6;i=e&63;if(isNaN(d))f=i=64;else if(isNaN(e))i=64;b=b+this.c.charAt(g)+this.c.charAt(a)+this.c.charAt(f)+this.c.charAt(i)}return b},t:function(c){var b="",a,d,e,g,f,i=0;for(c=c.replace(/[^A-Za-z0-9+/=]/g,"");i<c.length;){a=this.c.indexOf(c.charAt(i++));d=this.c.indexOf(c.charAt(i++));
g=this.c.indexOf(c.charAt(i++));f=this.c.indexOf(c.charAt(i++));a=a<<2|d>>4;d=(d&15)<<4|g>>2;e=(g&3)<<6|f;b+=String.fromCharCode(a);if(g!=64)b+=String.fromCharCode(d);if(f!=64)b+=String.fromCharCode(e)}return b=pui.r.t(b)}};
pui.downloadJSON=function(){if(pui.recordTest)pui.saveRecording();else if(pui.savedJSON==null)pui.alert("JSON is not available.");else{var c=pui.savedJSON;if(typeof JSON==="object"&&typeof JSON.parse==="function"&&typeof JSON.stringify==="function")try{c=JSON.stringify(JSON.parse(pui.savedJSON),null,"  ")}catch(b){}pui.F("text/plain","json.txt",c)}};
pui.saveRecording=function(c){for(var b=null,a=0;a<pui.b.payloads.length;a++){if(!b&&pui.b.responses[a].appJob)b=pui.b.responses[a].appJob.user;pui.b.payloads[a].response=pui.b.responses[a]}var d=K().testid;(a=d)||(a=prompt("Enter recording name"));if(a)if(pui.pjsServer)if(pui.b.payloads.length===0)pui.alert("No recording to save.");else{b={id:d,appuser:b,payloads:pui.b.payloads};a={"Content-Type":"application/json"};if(sessionStorage["atrium-token"])a.Authorization="Basic "+sessionStorage["atrium-token"];
fetch("/auto-testing/save-recording",{method:"POST",headers:a,body:JSON.stringify(b)}).then(function(g){if(g.ok){window.parent&&window.parent.Atrium&&window.parent.Atrium.api&&typeof window.parent.Atrium.api.reloadNavParent==="function"&&window.parent.Atrium.api.reloadNavParent("test-"+d);pui.b={payloads:[],responses:[]};typeof c==="function"?c():pui.alert("Recording saved.")}else pui.alert("Failed to save recording.")})["catch"](function(g){pui.alert("Error: Unable to save recording.");console.error("Fetch error:",
g)})}else{b=JSON.stringify({user:b,payloads:pui.b.payloads});var e=a;e.endsWith(".json")||(e+=".json");if(pui["recording path"]){a=[];a.push({name:"path",value:pui["recording path"]+e});a.push({name:"text",value:"1"});a.push({name:"replace",value:"Y"});a.push({name:"json",value:b,fileName:e});b=new pui.X;b.Y(a);a=J("PUI0001109.pgm");a=a.replace("/auth","");b.send(a,function(g){var f,i={};if(g.e()!=200)f=g.m();if(!f){i=eval("("+g.d()+")");i.success||(f=i.errorText)}if(f)pui.alert(f);else{pui.alert("Recording saved.");
pui.b={payloads:[],responses:[]}}})}else pui.F("text/plain",e,b)}};
pui.keepAlive=function(){var c;if(!(context=="genie"&&pui.f.i==true)){if(context=="dspf")c=pui.f==null?J("PUI0001200.pgm"):J("PUI0002110.pgm");else if(context=="genie")c=window.DOCUMENT_URI;else return false;if(pui.psid!=null&&pui.psid!="")c+="/"+pui.psid;if(pui.overrideSubmitUrl!=null&&typeof pui.overrideSubmitUrl=="function")try{c=pui.overrideSubmitUrl(c)}catch(b){}if(context=="genie")pui.B(pui.f.i=true);if(context=="dspf")pui.q=false;pui.va();var a={keepalive:"1"};if(pui.isCloud)a.workspace_id=
pui.cloud.ws.id;y({url:pui.Z(c),method:"post",params:a,sendAsBinary:false,suppressAlert:true,handler:function(){pui.I();if(context=="genie")pui.B(pui.f.i=false);if(context=="dspf")pui.q=true;for(var d=0;d<pui.o.length;d++)pui.o[d].unMask()},onfail:function(d){pui.onoffline==null&&!pui["suppress comm errors"]&&pui.alert(pui.la(d));pui.I();if(context=="genie")pui.B(pui.f.i=false);if(context=="dspf")pui.q=true;for(d=0;d<pui.o.length;d++)pui.o[d].unMask();pui.onoffline!=null&&pui.onoffline()}});return true}};
pui.getWindowSize=function(){var c,b;if(document.body&&document.body.offsetWidth){c=document.body.offsetWidth;b=document.body.offsetHeight}if(document.compatMode=="CSS1Compat"&&document.documentElement&&document.documentElement.offsetWidth){c=document.documentElement.offsetWidth;b=document.documentElement.offsetHeight}if(window.innerWidth&&window.innerHeight){c=window.innerWidth;b=window.innerHeight}if(window.visualViewport&&window.visualViewport.width&&window.visualViewport.height){c=window.visualViewport.width;
b=window.visualViewport.height}if(document.documentElement&&document.documentElement.clientWidth){c=document.documentElement.clientWidth;b=document.documentElement.clientHeight}if(c==null&&screen!=null)c=screen.width;if(b==null&&screen!=null)b=screen.height;if(c==null)c=800;if(b==null)b=600;return{width:c,height:b}};pui.openURL=function(c){window.open(c)};
pui.normalizeURL=function(c,b){if(c==null||typeof c!="string")return"";if(b==true&&window.puiMobileClient==null)return c;if(c.substr(0,5).toLowerCase()=="http:"||c.substr(0,6).toLowerCase()=="https:"||c.substr(0,5).toLowerCase()=="data:")return c;return pui.serverURL!=null?pui.serverURL+c:window.cordova&&c.substr(0,1)=="/"?c.substr(1):c};
pui.animate=function(c){var b,a,d=c.element;if(typeof d=="string")d=document.getElementById(d);if(d!=null){var e;b=c.effect;if(b=="fly in left"||b=="fly in right"||b=="fly out left"||b=="fly out right")e="left";else if(b=="fly in up"||b=="fly in down"||b=="fly out up"||b=="fly out down")e="top";else if(b=="fade in"||b=="fade out")e="opacity";else{e=c.properties;if(e==null){e=c.property;if(e==null)return}}if(typeof e=="string")e=[e];var g=c.duration;if(g==null)g="500ms";if(g.substr(g.length-1,1)!=
"s")g+="s";var f=parseInt(g)*1E3;if(g.length>2&&g.substr(g.length-2,2)=="ms")f=parseInt(g);var i=c.type;if(i==null)i="ease";var h=c.from,k=c.to;switch(b){case "fly in right":h=-d.offsetWidth;h+="px";k="0px";break;case "fly in left":h=d.offsetWidth;h+="px";k="0px";break;case "fly out left":k=-d.offsetWidth;k+="px";h="0px";break;case "fly out right":k=d.offsetWidth;k+="px";h="0px";break;case "fly out down":k=d.offsetHeight;k+="px";h="0px";break;case "fly out up":k=-d.offsetHeight;k+="px";h="0px";break;
case "fly in up":h=d.offsetHeight;h+="px";k="0px";break;case "fly in down":h=-d.offsetHeight;h+="px";k="0px";break;case "fade in":h="0";k="100";break;case "fade out":h="100";k="0";break}if(k!=null){var l="";for(b=0;b<e.length;b++){a=e[b];if(l!="")l+=", ";l+=a+" "+g+" "+i}var m=["transition","MozTransition","WebkitTransition","msTransition","OTransition"];if(h!=null){if(typeof h=="string"||typeof h=="number")h=[h];for(b=0;b<e.length;b++){a=e[b];d.style[a]=h[b]}}setTimeout(function(){for(var q=0;q<
m.length;q++)d.style[m[q]]=l;setTimeout(function(){if(typeof k=="string"||typeof k=="number")k=[k];for(var o=0;o<e.length;o++)d.style[e[o]]=k[o];setTimeout(function(){for(var t=0;t<m.length;t++)d.style[m[t]]="";c.oncomplete!=null&&c.oncomplete()},f)},1)},1)}}};pui.getActiveElement=function(){return context=="genie"?lastActiveElement:pui.activeElement};pui.fieldExit=function(c){var b=pui.getActiveElement();if(b!=null){var a=false;if(c!=null)a=true;context=="genie"?fieldExit(b,a):pui.fa(b)}};
pui.gotoNextElement=function(c){O(c,true)};pui.gotoPreviousElement=function(c){O(c,false)};
function O(c,b){var a=b?1:-1,d=document.querySelectorAll("INPUT,SELECT,TEXTAREA"),e=d.length;if(!(e<2))for(var g=Array.prototype.indexOf.call(d,c),f=g+a,i;;){if(f===g)break;if(f===e)f=0;else if(f===-1)f=e-1;else{var h=i=d[f];if(i!=null&&i.comboBoxWidget!=null)h=i.comboBoxWidget.G();if(i!=null&&i.h!=null)h=i.h.G();if(h.readOnly||h.disabled||h.style.visibility==="hidden"||h.tabIndex==="-1"||!h.clientHeight||!h.clientWidth)f+=a;else{try{h.focus();if(document.activeElement!=h){f+=a;continue}setTimeout(function(){pui["highlight on focus"]&&
typeof h.select=="function"&&h.select();pui.ua(null,h)},0)}catch(k){}break}}}}pui.showCalendar=function(c){var b=c;if(typeof c=="string")b=document.getElementById(c);if(b!=null)if(typeof b=="object"){var a=b.calimg;if(a!=null)if(a.click!=null&&typeof a.click=="function")a.click();else a.onclick!=null&&typeof a.onclick=="function"&&setTimeout(function(){a.onclick()},250)}};
pui.getComputedStyle=function(c){var b=null;if(window.getComputedStyle)b=window.getComputedStyle(c);else if(c.currentStyle)b=c.currentStyle;return b};
pui.upload=function(c,b){var a,d,e=c.dir,g=c.overwrite===true,f;if(typeof c.slimit=="number")f=c.slimit;var i;if(typeof c.flimit=="number")i=c.flimit;var h="";if(typeof c.altname=="string")h=c.altname;var k;if(typeof c.allowedTypes&&c.allowedTypes instanceof Array)k=c.allowedTypes;if(i==null)i=c.files.length;if(f==null||k==null){var l,m=[];for(a=0;a<c.files.length;a++){d=c.files[a];var q=typeof d.type!="undefined"&&d.type!=""?d.type:"application/octet-stream";pui.ba(m,q)==-1&&m.push(q);d=d.data&&
d.data instanceof ArrayBuffer?d.data.byteLength:d.size;d=Math.ceil(d/1048576);if(l==null||d>l)l=d}if(f==null)f=l;if(k==null)k=m}l=J("PUI0009109.PGM");l+="?AUTH="+encodeURIComponent(pui.p?pui.p:pui.appJob.auth);if(c.mode!=="widget")l+="&mode=ajax";if(c.id)l+="&id="+encodeURIComponent(c.id);l+="&r="+Math.floor(Math.random()*1E9);if(pui.isCloud)l+="&workspace_id="+pui.cloud.ws.id;m=new FormData;m.append("dir",e);m.append("overwrite",g?"1":"0");m.append("flimit",i);m.append("slimit",f);m.append("altname",
h);typeof c.generateNames=="string"&&m.append("generateNames",c.generateNames);for(a=0;a<k.length;a++)m.append("type",k[a]);for(a=0;a<c.files.length;a++){d=c.files[a];if(d.data&&d.data instanceof ArrayBuffer){var o;try{o=new Blob([d.data])}catch(t){e=new window.WebKitBlobBuilder;e.append(d.data);o=e.getBlob()}m.append("file",o)}else m.append("file",d);m.append("filename",d.name)}var n=new XMLHttpRequest;n.open("POST",l,true);n.onreadystatechange=function(){if(n.readyState==4){var j=true,r;if(n.status==
200){var p;try{p=eval("("+n.responseText+")")}catch(s){j=false;r="Server response missing or invalid."}if(p){j=p.success;if(!j)if(p.key){r=pui.getLanguageText("runtimeMsg","upload "+p.key);if(p.key=="file limit")r=r.replace("&1",i);if(p.key=="size limit")r=r.replace("&1",f)}else r=p.error}}else{j=false;r=n.status+" - "+n.statusText+".";if(n.status==0&&n.statusText=="")r="The FILE could not be found in the system."}typeof b=="function"&&b(j,r)}};if(typeof c.onabort=="function")n.onabort=c.onabort;
if(typeof c.onprogress=="function"&&"upload"in n)n.upload.onprogress=c.onprogress;if(typeof c.onload=="function")n.onload=c.onload;n.send(m);return n};pui.getCookie=function(c){var b=document.cookie.split(";"),a="",d="",e="",g="";for(g=0;g<b.length;g++){a=b[g].split("=");d=a[0].replace(/^\s+|\s+$/g,"");if(d==c){if(a.length>1)e=unescape(a[1].replace(/^\s+|\s+$/g,""));return e}}return null};
pui.setCookie=function(c,b,a,d,e,g,f){var i=new Date;i.setTime(i.getTime());if(a)a=a*1E3*60*60*24;i=new Date(i.getTime()+a);document.cookie=c+"="+escape(b)+(a?";expires="+i.toGMTString():"")+(d?";path="+d:"")+(e?";domain="+e:"")+(g?";secure":"")+(f?";SameSite="+f:"")};pui.deleteCookie=function(c,b,a,d,e){if(pui.getCookie(c))document.cookie=c+"="+(b?";path="+b:"")+(a?";domain="+a:"")+";expires=Thu, 01-Jan-1970 00:00:01 GMT"+(d?";Secure":"")+(e?";SameSite="+e:"")};
pui.refresh=function(c){if(c==null)c={};var b=c.url;c=c.skin;pui.setCookie("puiRefreshId",pui.psid,null,"/",null,null,"Strict");pui.skipConfirm=true;pui.shutdownOnClose=false;pui.confirmOnClose=false;if(c!=null){c="skin="+encodeURIComponent(c);b=window.location.href;var a=b.split("?");b=a[0];a=a[1];if(a==null)a="";a=a.split("&");for(var d=false,e=0;e<a.length;e++)if(a[e].length>=5&&a[e].substr(0,5).toLowerCase()=="skin="){a[e]=c;d=true}if(!d)if(a.length==1&&a[0]=="")a[0]=c;else a.push(c);a=a.join("&");
b=b+"?"+a}if(b!=null)window.location.href=b;else window.location.reload()};
pui.downloadURL=function(c){if(pui==null||pui.appJob==null||pui.appJob.auth==null||pui.appJob.auth=="")return pui.is_ie?"":"data:text/html,<!DOCTYPE html><html><body><p>To download, please connect to a Profound UI session.</p></body></html>";var b=c.inline===true;if(c.id==null)return"";var a=J("PUI0009110.PGM");a+="?id="+encodeURIComponent(c.id);if(c.contentType!=null)a+="&type="+encodeURIComponent(c.contentType);if(b)a+="&inline=1";a+="&usehttprc=0";a+="&AUTH="+encodeURIComponent(pui.p?pui.p:pui.appJob.auth);
a+="&r="+Math.floor(Math.random()*1E9);return a};pui.download=function(c){var b=pui.downloadURL(c);c=c.inline===true;if(pui==null||pui.appJob==null||pui.appJob.auth==null||pui.appJob.auth=="")c=true;c?pui.openURL(b):pui.link(b)};
pui.downloadFile=function(c){if(typeof c==="undefined"||c==null||typeof c.id!=="string"||c.id.length<1)pui.alert("Error downloading file. \n\n No file path given",null,"Error","Close");else{var b=pui.downloadURL(c),a=c.id,d=new XMLHttpRequest;d.responseType="blob";d.open("GET",b,true);d.send();var e=null,g=null,f=null,i=null;d.onprogress=function(h){var k=pui.extractFileNameFromContentDisposition(d.getResponseHeader("Content-Disposition"));if(!(a.split("/").pop()!=k&&k=="error.txt")){if(typeof d.onprogress.diaglogShown===
"undefined"){d.onprogress.diaglogShown=true;e=document.createElement("dialog");document.body.appendChild(e);g=document.createElement("p");e.appendChild(g);f=document.createElement("button");f.innerHTML="OK";f.onclick=function(){e.close();e.remove()};i=document.createElement("button");i.innerHTML="Cancel";i.id="cancelButton";i.onclick=function(){d.abort();e.close();e.remove()};e.appendChild(i);g.innerHTML="Downloading file: "+a+"<br> Starting download...";e.showModal();d.onprogress.lastTime=Date.now()}if(Date.now()>
d.onprogress.lastTime+2E3){g.innerHTML="Downloading file: "+a+"<br>"+h.type+" "+(h.loaded/1048576).toFixed(4)+" mb loaded";d.onprogress.lastTime=Date.now()}}};d.onloadend=function(){if(e!=null){e.querySelector("button[id='cancelButton']").remove();e.appendChild(f);g.innerHTML="File "+a+" downloaded successfully."}};d.onreadystatechange=function(){if(d.readyState==4&&d.status==200){var h=pui.extractFileNameFromContentDisposition(d.getResponseHeader("Content-Disposition"));if(a.split("/").pop()!=h&&
h=="error.txt"){var k=new FileReader;k.onload=function(){pui.alert("Error downloading file: "+a+"\n\n"+k.result,null,"Error","Close");console.log(k.result)};k.readAsText(d.response)}else{var l=null;if(typeof c.contentType==="string"&&c.contentType.length>0)l=c.contentType;else{l=d.getResponseHeader("Content-Type").split(";")[0];if(typeof l==="string"&&l=="application/octet-stream"){var m=h.split(".").pop();if(typeof m==="string")switch(m.toLowerCase()){case "pdf":l="application/pdf";break;case "txt":l=
"text/plain";break;case "csv":l="text/csv";break;case "json":l="application/json";break;case "xml":l="application/xml";break;case "html":l="text/html";break;case "htm":l="text/html";break;case "jpg":l="image/jpeg";break;case "jpeg":l="image/jpeg";break;case "png":l="image/png";break;case "gif":l="image/gif";break}}}m=["application/pdf","text/plain","text/csv","application/json","application/xml","text/html","image/jpeg","image/png","image/gif"];var q=new File([d.response],h,{type:l});q=URL.createObjectURL(q);
var o=document.createElement("a");if(typeof c.inline==="boolean"&&c.inline&&m.includes(l))o.target="_blank";else o.download=h;o.name=h;o.href=q;document.body.appendChild(o);o.dispatchEvent(new MouseEvent("click",{bubbles:true,cancelable:true,view:window}));document.body.removeChild(o)}}}}};pui.extractFileNameFromContentDisposition=function(c){c=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(c);if(c!=null&&c[1])return c[1].replace(/['"]/g,"");return null};
pui.focusOnContainer=function(){window.parent!=window&&pui.V(window.parent)&&window.parent.noderun||setTimeout(function(){if(pui.a==null){pui.a=document.createElement("input");pui.a.type=pui.is_touch?"button":"text";pui.a.readOnly=true;pui.a.style.position="absolute";pui.a.style.left="-999px";pui.a.style.top="-999px";pui.a.style.width="10px";pui.a.style.borderStyle="none";pui.a.style.backgroundColor="transparent";pui.runtimeContainer&&pui.runtimeContainer.appendChild(pui.a)}pui.J=true;pui.a.focus();
setTimeout(function(){pui.J=false},0)},1)};pui.addCSS=function(c){var b=document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css";if(pui.is_old_ie)a.styleSheet.cssText=c;else a.innerHTML=c;b.appendChild(a)};
pui.loadCSS=function(c){if(pui.H(c)!=null)return false;var b=document.getElementsByTagName("head")[0],a=document.createElement("link");a.setAttribute("rel","stylesheet");a.setAttribute("type","text/css");a.setAttribute("media","screen");a.setAttribute("href",pui.normalizeURL(c));b.appendChild(a);return true};
pui.removeCSS=function(c){var b=document.getElementsByTagName("head")[0],a=pui.H(c);if(a==null){a=b.getElementsByTagName("style");for(var d=0;d<a.length;d++){var e=a[d];if(e.innerHTML==c||e.styleSheet!=null&&e.styleSheet.cssText==c){b.removeChild(e);return true}}return false}else{b.removeChild(a);return true}};
pui.loadJS=function(c){if(c==null)return null;var b,a,d,e;if(typeof c=="string")b=c;if(typeof c=="object"){b=c.path;a=c.callback;d=c.onerror;e=c.test;if(e!=null&&typeof e=="function"&&e()==true)return false}if(b==null)return null;if(pui.ma(pui.normalizeURL(b))!=null)return false;c=document.getElementsByTagName("head")[0];var g=false,f=document.createElement("script");f.type="text/javascript";f.onreadystatechange=function(){if(f.readyState=="complete"||f.readyState=="loaded")if(!(e!=null&&typeof e==
"function"&&e()!=true)){!g&&a!=null&&a();g=true}};f.onload=function(){if(!(e!=null&&typeof e=="function"&&e()!=true)){!g&&a!=null&&a();g=true}};if(d)f.onerror=d;f.src=pui.normalizeURL(b);c.appendChild(f);return true};
pui.endOfSession=function(c){pui.confirmOnClose=false;pui.shutdownOnClose=false;if(window.puiMobileClient!=null){window.location.href="index.html";c!=null&&pui.alert(c)}else{var b=K().gobackto;if(b!=null){document.body.innerHTML="";c!=null&&pui.alert(c);location.href=b}if(navigator.app!=null&&navigator.app.exitApp!=null){document.body.innerHTML="";c!=null?pui.alert(c,function(){navigator.app.exitApp()}):navigator.app.exitApp()}}};
pui.addUrlCacheBuster=function(c,b){var a=Date.now();if(typeof b==="string"&&b.toLowerCase()!=="get")return c;return c=/[&?]r=[^&]+/.test(c)?c.replace(/([&?]r=)[^&]+/,function(d,e){return e+a}):c+(c.indexOf("?")==-1?"?":"&")+"r="+a};
pui.alert=function(c,b,a,d){if(window.cordova&&window.device.platform=="iOS"&&b==null&&a==null&&d==null)window.alert(c);else if(window.navigator!=null&&window.navigator.notification!=null&&window.navigator.notification.alert!=null)if(b==null&&a==null&&d==null&&window.puiMobileClient!=null&&window.puiMobileClient.alert!=null)window.puiMobileClient.alert(c);else{if(b==null)b=function(){};if(a==null)a="Profound UI";if(d==null)d="OK";window.navigator.notification.alert(c,b,a,d)}else pui.pa&&window.parent&&
window.parent!=window&&pui.V(window.parent)&&window.parent.noderun?console.log("Suppressed alert: "+c):alert(c)};pui.applyProperty=function(c,b,a){return window.applyProperty(c,b,a)};pui.get=function(c){return I(D(c,void 0))};
pui.set=function(c,b){var a;a=typeof c=="object"?c:document.getElementById(c);if(a!=null){if(a.tagName=="DIV")if(a.A!=null)a.A.setValue(b);else if(a.comboBoxWidget!=null)a.comboBoxWidget.setValue(b);else if(a.h!=null)a.h.setValue(b);else if(a.button&&a.button.T)a.button.T.innerHTML=b;else if(a.pui&&a.pui.widget)applyProperty(a,"value",b);else a.innerHTML=b;else if(a.tagName=="INPUT"||a.tagName=="SELECT"||a.tagName=="TEXTAREA")if(a.tagName=="INPUT"&&a.type=="checkbox")a.checked=typeof b=="boolean"?
b:a.checkedValue!=null&&b==a.checkedValue?true:false;else{context=="genie"&&b!=a.value&&pui.f.qa(a);a.value=b;if(a.j!=null)a.j.value=b}if(context=="dspf"||pui.U&&a.l==null){a.modified=true;pui.xa(a);var d=a.ya;if(a.id!=null&&a.id.indexOf(".")==-1&&a.D!=null)pui.ea[a.D]=true;if(d!=null){d.na();d.ga=true;pui.ta(a,d.ia())}}if(context=="genie"&&a.l!=null&&a.l.idx!=null)pui.response[a.l.idx]=a;pui.ca(a);if(a.pui&&a.pui.properties)a.pui.properties.value=b}};
pui.getActiveContainer=function(){if(context=="genie"){for(var c=1,b=document.getElementById("window"+c);b;){var a=document.getElementById("window"+ ++c);if(a)b=a;else break}if(b)return b}else if(context=="dspf"&&pui.L)return pui.L;return pui.runtimeContainer};pui.getDisplayType=function(){return pui.U?"5250-handler":context=="dspf"?"rdf":"5250"};
function P(c){function b(){if(!(l>=k.length)){o=k[l].command;t=k[l].wait;l+=1;if(typeof pui.onPCCommand=="function")try{var j=pui.onPCCommand(o,t);if(j==null||j==true){setTimeout(b,0);return}}catch(r){showFailureMessage(o)}q="?cmd="+encodeURIComponent(o)+"&wait="+(t?"1":"0");if(f==1||f==2)if(i){n.params.cmd=o;n.params.sign=1;n.params.hashalg=typeof pui["pccmd hash sign algorithm"]==="string"?pui["pccmd hash sign algorithm"].toUpperCase():"SHA-512";n.handler=e;B(n)}else a("");else if(f==3){n.params.cmd=
o;n.handler=d;B(n)}else{if(l==0&&k.length>0){j=[];for(var p=0;p<k.length;p++)j.push("("+k[p].da+")");o=j.join(" && ")}try{h.runCommand(o)}catch(s){j='Unable to execute "'+o+'".\n\n';if(s!=null)j+=s.name+":\n\n"+s.message+".";alert(j)}}}}function a(j){if(f==2){var r=new Image;r.onload=b;r.onerror=function(){console.log("PC Command Listener image mode failure.");g(o)};r.src=m+q+"&type=image&rnd="+String(Math.random())+String((new Date).getTime())+j}else{j=new pui.Ajax(m+q+j);j.method="GET";j.async=
t?false:true;j.suppressAlert=true;j.onfail=function(s){if(s.e()!=200){console.log("PC Command Listener comm. failure: "+s.m());g(o)}};j.onsuccess=function(s){try{var v=JSON.parse(s.d());if(!v.success&&typeof v.error==="string"){console.log("PC Command Listener failure.",v.error);g(o);return}}catch(w){}b()};try{j.send()}catch(p){console.log("PC Command Listener failure.",p);g(o)}}}function d(j,r){try{if(r)throw r;if(j==null)throw Error("Empty response from PCCMD crypt program.");if(j.error!=null||
typeof j.error==="string"&&j.error.length>0)throw Error("PCCMD crypt error: "+String(j.error));if(typeof j.cmd!=="string"||j.cmd.length==0)throw Error("PCCMD crypt response was missing a command.");var p="puilaunch:"+encodeURIComponent(j.cmd),s=document.createElement("iframe");s.style.display="none";s.src=p;document.body.appendChild(s);setTimeout(function(){s!=null&&s.parentNode!=null&&document.body.removeChild(s);s=null;b()},5E3)}catch(v){console.log(v)}}function e(j,r){try{if(r)throw r;if(typeof j!==
"object"||j===null)throw Error("Empty response");if(j.success!==true)throw typeof j.error==="string"&&j.error.length>0?j.error:"Unknown error";var p="";if(typeof j.sig==="string"&&j.sig.length>0)p="&sig="+encodeURIComponent(j.sig);a(p)}catch(s){console.log(s);g(o)}}function g(j){console.log("Command: "+j);j=pui.getLanguageText("runtimeMsg","pccommand error");pui["alert pccommand errors"]!==false?alert(j):console.log(j);console.log("Visit https://docs.profoundlogic.com/x/aQFK for more information on supporting STRPCCMD.")}
var f=1,i=false;if(pui["use pc listener"])f=1;if(window.HTTPS!=null&&window.HTTPS=="ON"&&f==1)f=2;if(pui["pc listener mode"])f=parseInt(pui["pc listener mode"]);if(typeof pui["pc command mode"]=="string")switch(pui["pc command mode"]){case "applet":f=0;break;case "listener":case "listener_m1":f=1;break;case "listener_m1s":f=1;i=true;break;case "listener_m2":f=2;break;case "listener_m2s":f=2;i=true;break;case "launcher":f=3;break;default:f=1;console.log("Unsupported pc command mode:",pui["pc command mode"])}if(f==
0){var h=document.getElementById("PCCommandApplet");if(!h){pui.s=c;loadPCCommandApplet("runCommandCb");return}}var k=[],l=0;k=typeof c=="string"?[{command:c,wait:false}]:c;c=parseInt(pui["pc listener port"],10);if(isNaN(c))c="80";var m="http://localhost:"+c+"/",q="",o,t,n={url:J("PUI0009117.pgm"),method:"post",params:{auth:pui.appJob&&pui.appJob.auth?pui.appJob.auth:""},async:true};b()}window.runCommandCb=function(){P(pui.s);pui.s=null};pui.runPCCommand=P;
pui.isServerBusy=function(){if(typeof context=="undefined")return false;if(context=="dspf"&&pui.q===false||context=="genie"&&pui.f.i===true)return true;for(var c=document.getElementsByTagName("iframe"),b=0;b<c.length;b++){var a=c[b].contentWindow;if(a!=null){var d=null;try{d=a.pui}catch(e){}if(d!=null)if(typeof d==="object")if(typeof d.isServerBusy==="function")if(d.isServerBusy())return true}}return false};
pui.showLastError=function(){if(errors.length==0)alert("No errors have been reported.");else{var c=errors.length-1;alert("Operation: "+errors[c].ra+"\nId: "+errors[c].id+"\n\nMessage: "+errors[c].text+"\n"+errors[c].wa)}};
pui.editCode=function(c,b){function a(u,z){var A=["","","","nn/n","nn/nn","nn/nn/n","nn/nn/nn","nnn/nn/nn","nn/nn/nnnn","nnn/nn/nnnn"];if(i.dateEdit==="*ymd"){A[8]="nnnn/nn/nn";A[9]="nnnnn/nn/nn"}A=A[v];u=String(u);u=u.replace(".","");u=u.replace(",","");u=u.replace("-","");u="0000000000"+u;u=u.substr(u.length-z);var L="/";if(i.dateEditSeparator!=null)L=i.dateEditSeparator;for(var H=false,M=0,N="",F=0;F<A.length;F++){var C=A.substr(F,1),Q=A.substr(F+1,1);if(C==="/"||Q==="/")H=true;if(C==="/")C=L;
else{C=u.substr(M,1);M+=1;if(C==="0")H||(C=" ");else H=true}N+=C}return N}function d(u,z,A){for(u+="";u.length<z;)u+=A;return u}var e=null,g=0,f=null,i={},h=2;if(typeof arguments[h]==="number"){e=arguments[h];h++;if(typeof arguments[h]==="number"){g=arguments[h];h++}}if(typeof arguments[h]==="string"){f=arguments[h];h++}if(typeof arguments[h]==="object"){i=arguments[h];h++}var k=false;if(f==="*astfill"){k=true;f=null}var l=false,m=null,q=false,o=h=false;h=" ";if(pui.appJob&&typeof pui.appJob.decimalFormat===
"string")h=pui.appJob.decimalFormat;var t=h==="I"||h==="J",n=h==="J";if(i.decimalEdit!=null){t=i.decimalEdit===","||i.decimalEdit==="0,";n=i.decimalEdit==="0."||i.decimalEdit==="0,"}if(b>="1"&&b<="4")m="999.00";if(b>="A"&&b<="D")m="999.00CR";if(b>="J"&&b<="M")m="999.00-";if(b>="N"&&b<="Q")m="-999.00";if(b=="1"||b=="A"||b=="J"||b=="N"||b=="2"||b=="B"||b=="K"||b=="O")q=true;h=b=="1"||b=="A"||b=="J"||b=="N"||b=="3"||b=="C"||b=="L"||b=="P"?true:false;if(b=="Z")m="999.00";if(b==="X"||b==="Z")o=true;if(b===
"X")l=true;b>="5"&&b<="9"&&pui.alert("User-defined edit code not supported: "+b+".");b>="1"&&b<="9"||b>="A"&&b<="D"||b>="J"&&b<="Q"||b>="X"&&b<="Z"||pui.alert("Invalid edit code: "+b+".");var j=(c||0)+"",r=parseFloat(j,10)||0,p;p=j.replace(/\..*/,"");if(p==="-0")p="-";if((p==""||p=="-")&&n)p="0";var s;s=j;if(s.indexOf(".")==-1)s+=".";s=s.replace(/.*\./,"");var v=p.length;if(v<3)v=3;var w=s.length;if(typeof e==="number")v=e;if(typeof g==="number")w=g;if(b=="Y"){if(v<3||v>9)pui.alert("Length not valid for edit code Y.");
return a(r,v)}e=".";if(t)e=",";if(o)e="";if(w>0){s=d(s,w,"0");if(p==="0"&&!n)p="";j=p+e+s}var E=" ";if(l)E="0";if(k)E="*";if(q){for(g=/(\d+)(\d{3})/;g.test(p);)p=p.replace(g,"$1"+(t?".":",")+"$2");j=p+(w>0?e+s:"")}t=r<0;j=j.replace(/-/g,"");if(m==="(999.00)"){if(t)j="("+j+")"}else if(m==="999.00-")j+=t?"-":" ";else if(m==="999.00CR")j+=t?"CR":"  ";else if(m==="-999.00")if(t)j="-"+j;if(f)j=f=="EUR"?j+" EUR":f=="$"?j.substr(0,1)=="-"?"-"+f+j.substr(1):f+j:f+j;if(!h)if(r===0)j="";(function(){var u=v;
u+=w&&!o?1:0;if(q)u+=parseInt((v-w-1)/3);if(m==="999.00CR")u+=2;if(m==="999.00-")u+=1;if(m==="-999.00")u+=1;if(typeof f==="string")u+=f.length;var z=j;for(z+="";z.length<u;)z=E+z;j=z})();return j};
pui.editWord=function(c,b,a){function d(){if(n.length>0){var p=n.substr(n.length-1,1);n=n.substr(0,n.length-1);if(p=="0"&&n.length==0&&r)p=j?"*":" "}else{p="0";if(r)p=" ";if(j)p="*"}return p}var e,g;c=String(c);var f={};if(typeof a==="object")f=a;a="$";if(f.currencySymbol!=null)a=f.currencySymbol;var i=b.indexOf("0")+1,h=b.indexOf("*")+1;if(i==0||h!=0&&h<i)i=h;var k=-1;for(e=b.length-1;e>=0;e-=1)if(e+1==i||b.substr(e,1)==" "){k=e;break}h=b.substr(0,k+1);var l="",m="",q=false,o=false,t=b.substr(k+
1).indexOf("-")>=0||b.substr(k+1).indexOf("CR")>=0;for(e=k+1;e<b.length;e++){g=b.substr(e,1);if(b.substr(e,2)=="CR"){o=true;e++}else if(g=="-")o=true;else if(g!="&")if(!(g=="*"&&!o))if(g.toUpperCase()>="A"&&g.toUpperCase()<="Z"&&t&&!o)b=b.substr(0,e)+" "+b.substr(e+1);else{l=b.substring(k+1,e);m=b.substr(e);q=true;break}}q||(l=b.substr(k+1));g=".";e=" ";if(pui.appJob&&typeof pui.appJob.decimalFormat==="string")e=pui.appJob.decimalFormat;if(typeof f.decimalFormat==="string")e=f.decimalFormat;if(e===
"I"||e==="J")g=",";e=0;g=h.split(g);if(g.length>1)e=g[1].replace(/[^ ]/g,"").length;var n;n=isNaN(Number(c))?"0":String(c);n=n.replace("-","");g=n.split(".");f=g[0];b="";k=null;if(g.length>1)b=g[1];if(k==null||isNaN(k))k=e;for(;b.length>k;)b=b.substr(0,b.length-1);for(;k>b.length;)b+="0";for(n=f+b;n.substr(0,1)=="0";)n=n.substr(1);f="";var j=k=false;var r=b=false;if(i==0)r=true;for(e=h.length-1;e>=0;e-=1){q=g=h.substr(e,1);if(g==" ")q=d();else if(g=="&")q=" ";else if(g=="0"&&e+1==i)q=d();else if(g==
"*"){j=true;q=d()}else if(g==a){if(e+2==i){q=d();b=true}}else if(k){q=" ";if(j)q="*"}f=q+f;if(e<=i)r=true;if(r&&n.length==0)k=true}l=l.replace(/&/g," ");l=l.replace(/\*/g," ");if(c>=0){l=l.replace("CR","  ");l=l.replace("-"," ")}f=f+l+m;c=f.length-1;f=G(f);if(j&&f.substr(0,1)!="*")f="*"+f;if(b)f=a+f;a=0;if(f[f.length-1]==="-")a=1;for(;f.length<=c;)f=" "+f;return f};
pui.getRadioGroupValue=function(c){if(typeof c!=="string")return null;if(typeof pui.z!=="object")return null;for(var b=null,a=pui.currentFormatNames,d=a.length-1;d>=0;d--){var e=a[d].toUpperCase()+"."+c.toUpperCase();if(typeof pui.z[e]!=="undefined"){b=pui.z[e];break}}if(b==null)return null;c=null;for(a=0;a<b.length;a++){d=b[a];if(d.checked&&d.radioValue!=null){c=d.radioValue;break}}return c};pui.S=function(){for(var c=document.getElementById("auth-form"),b=document.cookie.split("; "),a=false,d=0;d<b.length;d++){var e=b[d].split("=");if(unescape(e[0])=="pui-signon-"+c.action)if(unescape(e[1])=="1"){a=true;break}}if(typeof Storage!="undefined"){b=K();if(b.workstnid)sessionStorage["atrium-params-workstnid"]=b.workstnid;else try{delete sessionStorage["atrium-params-workstnid"]}catch(g){}if(b.suffixid)sessionStorage["atrium-params-suffixid"]=b.suffixid;else try{delete sessionStorage["atrium-params-suffixid"]}catch(f){}if(b.duplicateid)sessionStorage["atrium-params-duplicateid"]=
b.duplicateid;else try{delete sessionStorage["atrium-params-duplicateid"]}catch(i){}}if(a)location.href=c.action;else{if(a=document.getElementById("auth-box"))a.style.display="";c.elements["auth-user"].focus()}};
pui.R=function(){var c=document.getElementById("auth-form"),b=c.elements["auth-user"].value,a=c.elements["auth-password"].value,d=document.getElementById("auth-message");d.innerHTML="";if(I(b)==""){d.innerHTML=authMessages["user required"];c.elements["auth-user"].focus();return false}else if(I(a)==""){d.innerHTML=authMessages["password required"];c.elements["auth-password"].focus();return false}if(pui.pjsServer){var e=btoa(I(b)+":"+I(a));sessionStorage.setItem("atrium-token",e);return true}pui.k(function(){if(!Atrium.pjsServer){localStorage["pui-http-auth-invalid"]&&
delete localStorage["pui-http-auth-invalid"];var g=new pui.Ajax("/profoundui/pui0005010.pgm");g.async=true;g.method="POST";pui.setReqAuth(g,b,a);g.suppressAlert=true;g.onready=function(f){if(f.e()==200){var i=eval("("+f.d()+")");f=i.days;var h=false;if(i.warn==true)if(f==0){i=authMessages["password expired"];pui.alert(i);h=true}else{i=authMessages["password pending expiration"];i=i.replace(/{DAYS}/g,f);h=confirm(i)}if(h){f="/profoundui/changepass";f+="?user="+encodeURIComponent(b);f+="&next="+encodeURIComponent(c.action);
f+="&back="+encodeURIComponent(location.href);location.href=f}else{document.cookie=escape("pui-signon-"+c.action)+"=1; path=/";location.href=c.action}}else{d.innerHTML=authMessages["invalid credentials"];c.elements["auth-user"].focus()}};g.send()}});return false};
pui.k=function(c){if(Atrium.pjsServer){sessionStorage.removeItem("atrium-token");c()}else{var b=new pui.Ajax("/profoundui/pui0005010.pgm");b.async=typeof c==="function"?true:false;b.method="POST";pui.setReqAuth(b,"PUI_SIGNOFF_USER","PUI_SIGNOFF_USER");b.suppressAlert=true;if(typeof c==="function")b.onready=function(){typeof c=="function"&&c()};b.send()}};window.pui.signOn=pui.R;window.pui.clearCredentials=pui.k;window.pui.signOnInit=pui.S;
pui.Q=function(){var c=K(),b=document.getElementById("change-user"),a=document.getElementById("change-current"),d=b,e=document.getElementById("change-cancel");if(typeof c.user!="undefined"){b.value=c.user.toUpperCase();b.readOnly=true;b.className+=" read-only";d=a}if(typeof c.back=="undefined")e.style.display="none";document.getElementById("change-box").style.display="block";d.focus()};pui.P=function(){var c=K();if(typeof c.back!="undefined")location.href=c.back};
pui.C=function(){var c=K(),b=document.getElementById("change-form"),a=b.elements["change-user"].value,d=b.elements["change-current"].value,e=b.elements["change-new"].value,g=b.elements["change-confirm"].value,f=document.getElementById("change-message");f.innerHTML="";if(I(a)==""){f.innerHTML=passMessages["user required"];b.elements["change-user"].focus();return false}else if(I(d)==""){f.innerHTML=passMessages["current required"];b.elements["change-current"].focus();return false}else if(I(e)==""){f.innerHTML=
passMessages["new required"];b.elements["change-new"].focus();return false}else if(I(g)==""){f.innerHTML=passMessages["confirm required"];b.elements["change-confirm"].focus();return false}else if(e!=g){f.innerHTML=passMessages["must match"];b.elements["change-new"].focus();return false}g=new pui.Ajax("/profoundui/pui0005011.pgm");g.async=true;g.method="POST";g.params={};g.params.user=a;g.params.current=d;g.params["new"]=e;g.suppressAlert=true;g.onready=function(i){if(i.e()!=200){f.innerHTML="HTTP "+
i.e()+" - "+i.n()+".";b.elements["change-user"].focus()}else{var h;try{h=eval("("+i.d()+")");if(typeof h.success!="boolean")throw Error("Invalid response format: 'success' is not a boolean.");if(!h.success&&typeof h.error!="string")throw Error("Invalid response format: 'error' is not a string.");}catch(k){h={};h.success=false;h.error="The server response is missing or invalid."}if(h.success==false){f.innerHTML=h.error;b.elements["change-user"].focus()}else{pui.alert(passMessages.success);pui.k(function(){if(!Atrium.pjsServer){var l=
new pui.Ajax("/profoundui/pui0005010.pgm");l.async=true;l.method="POST";pui.setReqAuth(l,a,e);l.suppressAlert=true;l.onready=function(m){if(m.e()==200){if(typeof c.next!="undefined")location.href=c.next}else{pui.alert("HTTP "+m.e()+" - "+m.n()+".");b.elements["change-user"].focus()}};l.send()}})}}};g.send();return false};
pui.setReqAuth=function(c,b,a){var d=navigator.userAgent.indexOf("Edge")!=-1,e=!d&&navigator.userAgent.indexOf("Chrome")!=-1;d=!d&&navigator.userAgent.indexOf("Safari")!=-1&&!e;var g=navigator.userAgent.indexOf("Firefox")!=-1;if(d||e||g){c.user=encodeURIComponent(b);c.password=encodeURIComponent(a)}else{c.user=b;c.password=a}};window.pui.passInit=pui.Q;window.pui.passCancel=pui.P;window.pui.changePass=pui.C;
