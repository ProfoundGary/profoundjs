#!/usr/bin/env node

async function call() {
  // Load Profound.js
  var profoundjs = require("profoundjs");

  // Apply configuration
  await profoundjs.applyConfig();

  // Process command line parameters
  var login = (process.argv.includes("-login") || process.argv.includes("--login"));

  var moduleName = process.argv[2];
  if (moduleName == null) {
    console.log("You must specify a module.");
    process.exit(1);
  }

  var parms = [];
  for (var i = 3; i < process.argv.length; i++) {
    var arg = process.argv[i];
    if (arg.startsWith("-")) continue;
    parms.push(arg);
  }

  // Call module
  profoundjs.commandLineCall(moduleName, parms, login);
}
call();
